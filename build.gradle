plugins {
	id 'org.jetbrains.kotlin.multiplatform' version '1.3.0'
	id 'nebula.release' version '8.0.3'
	id 'io.freefair.sources-jar' version "2.7.3"
	id 'ru.capjack.capjack-bintray' version "0.8.0"
}

group = "ru.capjack.kt.utils"

repositories {
	jcenter()
}

capjackBintray {
	publications = ['metadata', 'js', 'jvm']
}

kotlin {
	targets {
		fromPreset(presets.jvm, 'jvm') { compilations.all { tasks[compileKotlinTaskName].kotlinOptions { jvmTarget = '1.8' } } }
		fromPreset(presets.js, 'js')
	}
	
	sourceSets {
		commonMain {
			dependencies {
				implementation 'org.jetbrains.kotlin:kotlin-stdlib'
			}
		}
		
		jvmMain {
			dependencies {
				implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
			}
		}
		
		jsMain {
			dependencies {
				implementation 'org.jetbrains.kotlin:kotlin-stdlib-js'
			}
		}
	}
}